{% extends 'base.html' %}

{% block content %}
<head>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/view_emails.css') }}">
</head>
<h1>Inbox for {{user.fullname}}</h1>
<!--doing some passsing parameters so the user will be redirected to a page with the thread id  --> 
{% if emails %}
    {% for email in emails %}
      <p>  <body>
        <div class="emails"> 
          <div class="card">
            <div class="container">
            <p> <b> Time: </b> {{ email.timestamp.strftime("%b %d, %Y %H:%M:%S") }} </p>
            <p> <b> From:</b> {{ email.sender_username}} </p>
            <p> <b> Subject: </b>{{ email.subject}} </p>
            <p> <b> Body:</b> <br>{{ email.email_body }} </p>
             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <!-- create big whitespace in between emails--> 
             <!--- <a href="/reply_emails">
             <button type="button" class="btn btn-primary">Reply</button>
             </a>             
            
                     reply emails link need to fix--> 
            </div>
          </div>
            </div>
              </body>
      </p>
    {% endfor %}
{% else %} 
<body>
  <p>No Emails received.</p> </body>
{% endif %} 
>>>>>>> main

    <script type="text/javascript">
      var socketio = io();

      const emails = document.getElementById("email.sender_username");

      const searchEmails = () => {
        const searchBar = document.getElementById("search-bar");
        const filter = searchBar.value.toUpperCase();
        const emailTexts = emails.querySelectorAll(".text");
        const searchType = document.getElementById("search-type").value;

        for (let i = 0; i < emailTexts.length; i++) {
          const text = emailTexts[i].getElementsByTagName("span")[0];
          const txtValue = text.textContent || text.innerText;
          const user = emailTexts[i].getElementsByTagName("strong")[0].textContent;
    
          if (searchType === "email.sender_username") {
            }
          }
        }
    };
    </script>
  </body>
</html>
  
{% endblock %}
